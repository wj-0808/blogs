import{f as $,p as k,n as D,q as F,A as L,g as m,j as e,w as o,t as v,h as M,F as b,r as n,o as p,z as c,c as h,s as U,u as W,E as j,v as q}from"./vue-router-0730c5e2.js";import{h as x}from"./http-402eca65.js";const A={style:{margin:"10px 0"}},P={key:1},G=$({__name:"workList",setup(R){const f=W(),g=k([]),l=D({offset:0,value:""}),w=k(0);F(()=>{u()}),L(async s=>{console.log({...l}),s(()=>{u({...l})})});const u=s=>{x.get("/work",{params:{...s}}).then(a=>{let{list:i,count:_}=a.data;g.value=i,w.value=_})},C=async s=>{await x.delete("/work/"+s),await u({...l}),j.success("删除成功")};return(s,a)=>{const i=n("el-button"),_=n("el-input"),r=n("el-table-column"),V=n("el-image"),B=n("el-tag"),E=n("el-popconfirm"),z=n("el-table"),N=n("el-pagination");return p(),m(b,null,[e(i,{"auto-insert-space":!0,onClick:a[0]||(a[0]=t=>v(f).push("./work"))},{default:o(()=>[c("添加作品")]),_:1}),M("div",A,[e(_,{style:{width:"200px",margin:"10px 0"},modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t),placeholder:"搜索",clearable:""},null,8,["modelValue"])]),e(z,{data:g.value,"row-key":"_id",stripe:"",style:{width:"100%"},"empty-text":"没有文章"},{default:o(()=>[e(r,{type:"index",width:"50"}),e(r,{prop:"title",label:"标题"}),e(r,{label:"封面"},{default:o(t=>[t.row.img?(p(),h(V,{key:0,style:{width:"80px",height:"80px"},src:t.row.img,fit:"cover"},null,8,["src"])):(p(),m("span",P,"无"))]),_:1}),e(r,{prop:"description",label:"描述","show-overflow-tooltip":""}),e(r,{label:"关键字"},{default:o(t=>[(p(!0),m(b,null,U(t.row.keyWords,(d,y)=>(p(),h(B,{type:["","success","info","warning","danger"][y%5],style:{"margin-right":"5px"},key:y},{default:o(()=>[c(q(d),1)]),_:2},1032,["type"]))),128))]),_:1}),e(r,{label:"操作"},{default:o(t=>[e(i,{size:"small",type:"primary",plain:"",onClick:d=>v(f).push("./work?id="+t.row._id)},{default:o(()=>[c("编辑")]),_:2},1032,["onClick"]),e(E,{onConfirm:d=>C(t.row._id),title:"确认删除吗？多可惜！","confirm-button-text":"是","cancel-button-text":"不了"},{reference:o(()=>[e(i,{size:"small",type:"danger",plain:""},{default:o(()=>[c("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(N,{class:"pagination",background:"",layout:"prev, pager, next",total:w.value,"current-page":l.offset,"onUpdate:currentPage":a[2]||(a[2]=t=>l.offset=t)},null,8,["total","current-page"])],64)}}});export{G as default};
