import{f as D,u as N,p as k,n as $,q as F,A as M,r as n,g as m,j as e,w as o,t as v,h as U,F as b,o as c,z as p,c as x,s as W,E as j,v as q,_ as A}from"./vue-router-bab8ae27.js";import{h}from"./http-322f23cb.js";const P={style:{margin:"10px 0"}},R={key:1},S=D({__name:"workList",setup(T){const f=N(),g=k([]),l=$({offset:0,value:""}),w=k(0);F(()=>{u()}),M(async s=>{console.log({...l}),s(()=>{u({...l})})});const u=s=>{h.get("/work",{params:{...s}}).then(a=>{let{list:i,count:_}=a.data;g.value=i,w.value=_})},C=async s=>{await h.delete("/work/"+s),await u({...l}),j.success("删除成功")};return(s,a)=>{const i=n("el-button"),_=n("el-input"),r=n("el-table-column"),V=n("el-image"),B=n("el-tag"),E=n("el-popconfirm"),L=n("el-table"),z=n("el-pagination");return c(),m(b,null,[e(i,{"auto-insert-space":!0,onClick:a[0]||(a[0]=t=>v(f).push("./work"))},{default:o(()=>[p("添加作品")]),_:1}),U("div",P,[e(_,{style:{width:"200px",margin:"10px 0"},modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t),placeholder:"搜索",clearable:""},null,8,["modelValue"])]),e(L,{data:g.value,"row-key":"_id",stripe:"",style:{width:"100%"},"empty-text":"没有文章"},{default:o(()=>[e(r,{type:"index",width:"50"}),e(r,{prop:"title",label:"标题"}),e(r,{label:"封面"},{default:o(t=>[t.row.img?(c(),x(V,{key:0,style:{width:"80px",height:"80px"},src:t.row.img,fit:"cover"},null,8,["src"])):(c(),m("span",R,"无"))]),_:1}),e(r,{prop:"description",label:"描述","show-overflow-tooltip":""}),e(r,{label:"关键字"},{default:o(t=>[(c(!0),m(b,null,W(t.row.keyWords,(d,y)=>(c(),x(B,{type:["","success","info","warning","danger"][y%5],style:{"margin-right":"5px"},key:y},{default:o(()=>[p(q(d),1)]),_:2},1032,["type"]))),128))]),_:1}),e(r,{label:"操作"},{default:o(t=>[e(i,{size:"small",type:"primary",plain:"",onClick:d=>v(f).push("./work?id="+t.row._id)},{default:o(()=>[p("编辑")]),_:2},1032,["onClick"]),e(E,{onConfirm:d=>C(t.row._id),title:"确认删除吗？多可惜！","confirm-button-text":"是","cancel-button-text":"不了"},{reference:o(()=>[e(i,{size:"small",type:"danger",plain:""},{default:o(()=>[p("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(z,{class:"pagination",background:"",layout:"prev, pager, next",total:w.value,"current-page":l.offset,"onUpdate:currentPage":a[2]||(a[2]=t=>l.offset=t)},null,8,["total","current-page"])],64)}}}),I=A(S,[["__file","D:/Code/blogs/web/src/admin/views/workList.vue"]]);export{I as default};
